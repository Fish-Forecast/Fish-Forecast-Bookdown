<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5.3 Metrics | Fisheries Catch Forecasting</title>
  <meta name="description" content="This book will show you how to model and forecast annual and seasonal fisheries catches using R and its time-series analysis functions and packages. Forecasting using time-varying regression, ARIMA (Box-Jenkins) models, and expoential smoothing models is demonstrated using real catch time series. The entire process from data evaluation and diagnostics, model fitting, model selection and forecast evaluation is shown. The focus of the book is on univariate time series (annual or seasonal), however multivariate regression with autocorrelated errors and multivariate autoregressive models (MAR) are covered briefly. For multivariate autoregressive models and multivariate autoregressive state-space models for fisheries and environmental sciences, see Holmes, Ward and Scheuerell (2018)." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="5.3 Metrics | Fisheries Catch Forecasting" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="images/cover.png" />
  <meta property="og:description" content="This book will show you how to model and forecast annual and seasonal fisheries catches using R and its time-series analysis functions and packages. Forecasting using time-varying regression, ARIMA (Box-Jenkins) models, and expoential smoothing models is demonstrated using real catch time series. The entire process from data evaluation and diagnostics, model fitting, model selection and forecast evaluation is shown. The focus of the book is on univariate time series (annual or seasonal), however multivariate regression with autocorrelated errors and multivariate autoregressive models (MAR) are covered briefly. For multivariate autoregressive models and multivariate autoregressive state-space models for fisheries and environmental sciences, see Holmes, Ward and Scheuerell (2018)." />
  <meta name="github-repo" content="fish-forecast/Fish-Forecast-Bookdown/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5.3 Metrics | Fisheries Catch Forecasting" />
  
  <meta name="twitter:description" content="This book will show you how to model and forecast annual and seasonal fisheries catches using R and its time-series analysis functions and packages. Forecasting using time-varying regression, ARIMA (Box-Jenkins) models, and expoential smoothing models is demonstrated using real catch time series. The entire process from data evaluation and diagnostics, model fitting, model selection and forecast evaluation is shown. The focus of the book is on univariate time series (annual or seasonal), however multivariate regression with autocorrelated errors and multivariate autoregressive models (MAR) are covered briefly. For multivariate autoregressive models and multivariate autoregressive state-space models for fisheries and environmental sciences, see Holmes, Ward and Scheuerell (2018)." />
  <meta name="twitter:image" content="images/cover.png" />

<meta name="author" content="Elizabeth Holmes" />


<meta name="date" content="2020-10-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="5-2-cross-validation.html"/>
<link rel="next" href="5-4-candidate-model-set.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html"><img src="./images/fish-forecast.jpg" width=50></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="1-introduction.html"><a href="1-introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="1-1-stergiou-and-christou-1996.html"><a href="1-1-stergiou-and-christou-1996.html"><i class="fa fa-check"></i><b>1.1</b> Stergiou and Christou 1996</a><ul>
<li class="chapter" data-level="1.1.1" data-path="1-1-stergiou-and-christou-1996.html"><a href="1-1-stergiou-and-christou-1996.html#landingsdata"><i class="fa fa-check"></i><b>1.1.1</b> Hellenic landings data</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="1-2-the-landings-data-and-covariates.html"><a href="1-2-the-landings-data-and-covariates.html"><i class="fa fa-check"></i><b>1.2</b> The landings data and covariates</a></li>
<li class="chapter" data-level="1.3" data-path="1-3-ts-objects.html"><a href="1-3-ts-objects.html"><i class="fa fa-check"></i><b>1.3</b> ts objects</a><ul>
<li class="chapter" data-level="1.3.1" data-path="1-3-ts-objects.html"><a href="1-3-ts-objects.html#ts-function"><i class="fa fa-check"></i><b>1.3.1</b> <code>ts()</code> function</a></li>
<li class="chapter" data-level="1.3.2" data-path="1-3-ts-objects.html"><a href="1-3-ts-objects.html#ggplot-and-ts-objects"><i class="fa fa-check"></i><b>1.3.2</b> ggplot and ts objects</a></li>
<li class="chapter" data-level="1.3.3" data-path="1-3-ts-objects.html"><a href="1-3-ts-objects.html#plotting-using-a-data-frame"><i class="fa fa-check"></i><b>1.3.3</b> Plotting using a data frame</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="1-4-packages.html"><a href="1-4-packages.html"><i class="fa fa-check"></i><b>1.4</b> Packages</a></li>
<li class="chapter" data-level="1.5" data-path="1-5-references.html"><a href="1-5-references.html"><i class="fa fa-check"></i><b>1.5</b> References</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-time-varying-regression.html"><a href="2-time-varying-regression.html"><i class="fa fa-check"></i><b>2</b> Time-varying regression</a><ul>
<li class="chapter" data-level="2.1" data-path="2-1-fitting.html"><a href="2-1-fitting.html"><i class="fa fa-check"></i><b>2.1</b> Fitting</a><ul>
<li class="chapter" data-level="2.1.1" data-path="2-1-fitting.html"><a href="2-1-fitting.html#orthogonal-polynomials"><i class="fa fa-check"></i><b>2.1.1</b> Orthogonal polynomials</a></li>
<li class="chapter" data-level="2.1.2" data-path="2-1-fitting.html"><a href="2-1-fitting.html#residual-diagnostics"><i class="fa fa-check"></i><b>2.1.2</b> Residual diagnostics</a></li>
<li class="chapter" data-level="2.1.3" data-path="2-1-fitting.html"><a href="2-1-fitting.html#compare-to-stergiou-and-christou"><i class="fa fa-check"></i><b>2.1.3</b> Compare to Stergiou and Christou</a></li>
<li class="chapter" data-level="2.1.4" data-path="2-1-fitting.html"><a href="2-1-fitting.html#summary"><i class="fa fa-check"></i><b>2.1.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="2-2-forecasting.html"><a href="2-2-forecasting.html"><i class="fa fa-check"></i><b>2.2</b> Forecasting</a><ul>
<li class="chapter" data-level="2.2.1" data-path="2-2-forecasting.html"><a href="2-2-forecasting.html#the-forecast-package"><i class="fa fa-check"></i><b>2.2.1</b> The forecast package</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="2-1-fitting.html"><a href="2-1-fitting.html#summary"><i class="fa fa-check"></i><b>2.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-arima-models.html"><a href="3-arima-models.html"><i class="fa fa-check"></i><b>3</b> ARIMA Models</a><ul>
<li class="chapter" data-level="3.1" data-path="3-1-overview.html"><a href="3-1-overview.html"><i class="fa fa-check"></i><b>3.1</b> Overview</a><ul>
<li class="chapter" data-level="3.1.1" data-path="3-1-overview.html"><a href="3-1-overview.html#components-of-an-arima-model"><i class="fa fa-check"></i><b>3.1.1</b> Components of an ARIMA model</a></li>
<li class="chapter" data-level="3.1.2" data-path="3-1-overview.html"><a href="3-1-overview.html#box-jenkins-method"><i class="fa fa-check"></i><b>3.1.2</b> Box-Jenkins method</a></li>
<li class="chapter" data-level="3.1.3" data-path="3-1-overview.html"><a href="3-1-overview.html#acf-and-pacf-functions"><i class="fa fa-check"></i><b>3.1.3</b> ACF and PACF functions</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="3-2-stationarity.html"><a href="3-2-stationarity.html"><i class="fa fa-check"></i><b>3.2</b> Stationarity</a><ul>
<li class="chapter" data-level="3.2.1" data-path="3-2-stationarity.html"><a href="3-2-stationarity.html#definition"><i class="fa fa-check"></i><b>3.2.1</b> Definition</a></li>
<li class="chapter" data-level="3.2.2" data-path="3-2-stationarity.html"><a href="3-2-stationarity.html#non-stationarity"><i class="fa fa-check"></i><b>3.2.2</b> Non-stationarity</a></li>
<li class="chapter" data-level="3.2.3" data-path="3-2-stationarity.html"><a href="3-2-stationarity.html#stationarity-tests"><i class="fa fa-check"></i><b>3.2.3</b> Stationarity tests</a></li>
<li class="chapter" data-level="3.2.4" data-path="3-2-stationarity.html"><a href="3-2-stationarity.html#differencing-the-data"><i class="fa fa-check"></i><b>3.2.4</b> Differencing the data</a></li>
<li class="chapter" data-level="3.2.5" data-path="2-1-fitting.html"><a href="2-1-fitting.html#summary"><i class="fa fa-check"></i><b>3.2.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="3-3-model-structure.html"><a href="3-3-model-structure.html"><i class="fa fa-check"></i><b>3.3</b> Model structure</a><ul>
<li class="chapter" data-level="3.3.1" data-path="3-3-model-structure.html"><a href="3-3-model-structure.html#ar-and-ma-lags"><i class="fa fa-check"></i><b>3.3.1</b> AR and MA lags</a></li>
<li class="chapter" data-level="3.3.2" data-path="3-3-model-structure.html"><a href="3-3-model-structure.html#model-order"><i class="fa fa-check"></i><b>3.3.2</b> Model order</a></li>
<li class="chapter" data-level="3.3.3" data-path="3-3-model-structure.html"><a href="3-3-model-structure.html#choosing-the-ar-and-ma-levels"><i class="fa fa-check"></i><b>3.3.3</b> Choosing the AR and MA levels</a></li>
<li class="chapter" data-level="3.3.4" data-path="3-3-model-structure.html"><a href="3-3-model-structure.html#trace-true"><i class="fa fa-check"></i><b>3.3.4</b> Trace = TRUE</a></li>
<li class="chapter" data-level="3.3.5" data-path="3-3-model-structure.html"><a href="3-3-model-structure.html#stepwise-false"><i class="fa fa-check"></i><b>3.3.5</b> stepwise = FALSE</a></li>
<li class="chapter" data-level="3.3.6" data-path="2-1-fitting.html"><a href="2-1-fitting.html#summary"><i class="fa fa-check"></i><b>3.3.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="3-4-fitting-arima-models.html"><a href="3-4-fitting-arima-models.html"><i class="fa fa-check"></i><b>3.4</b> Fitting ARIMA models</a><ul>
<li class="chapter" data-level="3.4.1" data-path="3-4-fitting-arima-models.html"><a href="3-4-fitting-arima-models.html#fitting-with-auto.arima"><i class="fa fa-check"></i><b>3.4.1</b> Fitting with <code>auto.arima()</code></a></li>
<li class="chapter" data-level="3.4.2" data-path="3-4-fitting-arima-models.html"><a href="3-4-fitting-arima-models.html#outputting-the-models-tested"><i class="fa fa-check"></i><b>3.4.2</b> Outputting the models tested</a></li>
<li class="chapter" data-level="3.4.3" data-path="3-4-fitting-arima-models.html"><a href="3-4-fitting-arima-models.html#repeat-with-the-sardine-data"><i class="fa fa-check"></i><b>3.4.3</b> Repeat with the sardine data</a></li>
<li class="chapter" data-level="3.4.4" data-path="3-4-fitting-arima-models.html"><a href="3-4-fitting-arima-models.html#missing-values"><i class="fa fa-check"></i><b>3.4.4</b> Missing values</a></li>
<li class="chapter" data-level="3.4.5" data-path="3-4-fitting-arima-models.html"><a href="3-4-fitting-arima-models.html#fit-a-specific-arima-model"><i class="fa fa-check"></i><b>3.4.5</b> Fit a specific ARIMA model</a></li>
<li class="chapter" data-level="3.4.6" data-path="3-4-fitting-arima-models.html"><a href="3-4-fitting-arima-models.html#model-checking"><i class="fa fa-check"></i><b>3.4.6</b> Model checking</a></li>
<li class="chapter" data-level="3.4.7" data-path="3-4-fitting-arima-models.html"><a href="3-4-fitting-arima-models.html#workflow-for-non-seasonal-data"><i class="fa fa-check"></i><b>3.4.7</b> Workflow for non-seasonal data</a></li>
<li class="chapter" data-level="3.4.8" data-path="3-4-fitting-arima-models.html"><a href="3-4-fitting-arima-models.html#stepwise-vs-exhaustive-model-selection"><i class="fa fa-check"></i><b>3.4.8</b> Stepwise vs exhaustive model selection</a></li>
<li class="chapter" data-level="3.4.9" data-path="2-1-fitting.html"><a href="2-1-fitting.html#summary"><i class="fa fa-check"></i><b>3.4.9</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="2-2-forecasting.html"><a href="2-2-forecasting.html#forecasting"><i class="fa fa-check"></i><b>3.5</b> Forecasting</a><ul>
<li class="chapter" data-level="3.5.1" data-path="3-5-forecasting.html"><a href="3-5-forecasting.html"><i class="fa fa-check"></i><b>3.5.1</b> Forecasting with <code>forecast()</code></a></li>
<li class="chapter" data-level="3.5.2" data-path="3-4-fitting-arima-models.html"><a href="3-4-fitting-arima-models.html#missing-values"><i class="fa fa-check"></i><b>3.5.2</b> Missing values</a></li>
<li class="chapter" data-level="3.5.3" data-path="3-5-forecasting.html"><a href="3-5-forecasting.html#null-forecast-models"><i class="fa fa-check"></i><b>3.5.3</b> Null forecast models</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-exponential-smoothing-models.html"><a href="4-exponential-smoothing-models.html"><i class="fa fa-check"></i><b>4</b> Exponential smoothing models</a><ul>
<li class="chapter" data-level="4.1" data-path="3-1-overview.html"><a href="3-1-overview.html#overview"><i class="fa fa-check"></i><b>4.1</b> Overview</a><ul>
<li class="chapter" data-level="4.1.1" data-path="4-1-overview.html"><a href="4-1-overview.html"><i class="fa fa-check"></i><b>4.1.1</b> Naive model</a></li>
<li class="chapter" data-level="4.1.2" data-path="4-1-overview.html"><a href="4-1-overview.html#exponential-smoothing"><i class="fa fa-check"></i><b>4.1.2</b> Exponential smoothing</a></li>
<li class="chapter" data-level="4.1.3" data-path="4-1-overview.html"><a href="4-1-overview.html#exponential-smoothing-model"><i class="fa fa-check"></i><b>4.1.3</b> Exponential smoothing model</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="4-2-ets-function.html"><a href="4-2-ets-function.html"><i class="fa fa-check"></i><b>4.2</b> <code>ets()</code> function</a><ul>
<li class="chapter" data-level="4.2.1" data-path="4-2-ets-function.html"><a href="4-2-ets-function.html#the-weighting-function"><i class="fa fa-check"></i><b>4.2.1</b> The weighting function</a></li>
<li class="chapter" data-level="4.2.2" data-path="4-2-ets-function.html"><a href="4-2-ets-function.html#decomposing-your-model-fit"><i class="fa fa-check"></i><b>4.2.2</b> Decomposing your model fit</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="4-3-ets-with-trend.html"><a href="4-3-ets-with-trend.html"><i class="fa fa-check"></i><b>4.3</b> ETS with trend</a><ul>
<li class="chapter" data-level="4.3.1" data-path="4-3-ets-with-trend.html"><a href="4-3-ets-with-trend.html#exponential-smoothing-model-with-trend"><i class="fa fa-check"></i><b>4.3.1</b> Exponential smoothing model with trend</a></li>
<li class="chapter" data-level="4.3.2" data-path="4-3-ets-with-trend.html"><a href="4-3-ets-with-trend.html#produce-forecast-using-a-previous-fit"><i class="fa fa-check"></i><b>4.3.2</b> Produce forecast using a previous fit</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="4-4-forecast-performance.html"><a href="4-4-forecast-performance.html"><i class="fa fa-check"></i><b>4.4</b> Forecast performance</a><ul>
<li class="chapter" data-level="4.4.1" data-path="4-4-forecast-performance.html"><a href="4-4-forecast-performance.html#test-forecast-performance"><i class="fa fa-check"></i><b>4.4.1</b> Test forecast performance</a></li>
<li class="chapter" data-level="4.4.2" data-path="4-4-forecast-performance.html"><a href="4-4-forecast-performance.html#testing-a-specific-ets-model"><i class="fa fa-check"></i><b>4.4.2</b> Testing a specific ets model</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="4-5-further-reading.html"><a href="4-5-further-reading.html"><i class="fa fa-check"></i><b>4.5</b> Further Reading</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-perf-testing.html"><a href="5-perf-testing.html"><i class="fa fa-check"></i><b>5</b> Testing forecast accuracy</a><ul>
<li class="chapter" data-level="5.1" data-path="5-1-training-settest-set.html"><a href="5-1-training-settest-set.html"><i class="fa fa-check"></i><b>5.1</b> Training set/test set</a><ul>
<li class="chapter" data-level="5.1.1" data-path="5-1-training-settest-set.html"><a href="5-1-training-settest-set.html#forecast-versus-actual"><i class="fa fa-check"></i><b>5.1.1</b> Forecast versus actual</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="5-2-cross-validation.html"><a href="5-2-cross-validation.html"><i class="fa fa-check"></i><b>5.2</b> Cross-Validation</a><ul>
<li class="chapter" data-level="5.2.1" data-path="5-2-cross-validation.html"><a href="5-2-cross-validation.html#variable-window"><i class="fa fa-check"></i><b>5.2.1</b> Variable window</a></li>
<li class="chapter" data-level="5.2.2" data-path="5-2-cross-validation.html"><a href="5-2-cross-validation.html#fixed-window"><i class="fa fa-check"></i><b>5.2.2</b> Fixed window</a></li>
<li class="chapter" data-level="5.2.3" data-path="5-2-cross-validation.html"><a href="5-2-cross-validation.html#cross-validation-farther-into-the-future"><i class="fa fa-check"></i><b>5.2.3</b> Cross-validation farther into the future</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="5-3-metrics.html"><a href="5-3-metrics.html"><i class="fa fa-check"></i><b>5.3</b> Metrics</a><ul>
<li class="chapter" data-level="5.3.1" data-path="5-3-metrics.html"><a href="5-3-metrics.html#accuracy-function"><i class="fa fa-check"></i><b>5.3.1</b> <code>accuracy()</code> function</a></li>
<li class="chapter" data-level="5.3.2" data-path="5-3-metrics.html"><a href="5-3-metrics.html#test-multiple-models"><i class="fa fa-check"></i><b>5.3.2</b> Test multiple models</a></li>
<li class="chapter" data-level="5.3.3" data-path="5-2-cross-validation.html"><a href="5-2-cross-validation.html#cross-validation"><i class="fa fa-check"></i><b>5.3.3</b> Cross-validation</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="5-4-candidate-model-set.html"><a href="5-4-candidate-model-set.html"><i class="fa fa-check"></i><b>5.4</b> Candidate model set</a></li>
<li class="chapter" data-level="5.5" data-path="5-5-testing-the-candidate-model-set.html"><a href="5-5-testing-the-candidate-model-set.html"><i class="fa fa-check"></i><b>5.5</b> Testing the candidate model set</a><ul>
<li class="chapter" data-level="5.5.1" data-path="5-5-testing-the-candidate-model-set.html"><a href="5-5-testing-the-candidate-model-set.html#fit-each-of-our-candidate-models"><i class="fa fa-check"></i><b>5.5.1</b> Fit each of our candidate models</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="5-6-models-fit.html"><a href="5-6-models-fit.html"><i class="fa fa-check"></i><b>5.6</b> Models fit</a><ul>
<li class="chapter" data-level="5.6.1" data-path="5-6-models-fit.html"><a href="5-6-models-fit.html#metrics-for-each-model"><i class="fa fa-check"></i><b>5.6.1</b> Metrics for each model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="6-covariates.html"><a href="6-covariates.html"><i class="fa fa-check"></i><b>6</b> Covariates</a><ul>
<li class="chapter" data-level="6.1" data-path="6-1-covariates-used-in-stergiou-and-christou.html"><a href="6-1-covariates-used-in-stergiou-and-christou.html"><i class="fa fa-check"></i><b>6.1</b> Covariates used in Stergiou and Christou</a><ul>
<li class="chapter" data-level="" data-path="6-1-covariates-used-in-stergiou-and-christou.html"><a href="6-1-covariates-used-in-stergiou-and-christou.html#preparing-the-data-frame"><i class="fa fa-check"></i>Preparing the data frame</a></li>
<li class="chapter" data-level="6.1.1" data-path="6-1-covariates-used-in-stergiou-and-christou.html"><a href="6-1-covariates-used-in-stergiou-and-christou.html#cov.df"><i class="fa fa-check"></i><b>6.1.1</b> Creating the data frame for model fitting</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="6-2-collinear.html"><a href="6-2-collinear.html"><i class="fa fa-check"></i><b>6.2</b> Collinearity</a><ul>
<li class="chapter" data-level="6.2.1" data-path="6-2-collinear.html"><a href="6-2-collinear.html#effect-of-collinearity"><i class="fa fa-check"></i><b>6.2.1</b> Effect of collinearity</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="6-3-MREGVAR.html"><a href="6-3-MREGVAR.html"><i class="fa fa-check"></i><b>6.3</b> Variable selection</a><ul>
<li class="chapter" data-level="6.3.1" data-path="6-3-MREGVAR.html"><a href="6-3-MREGVAR.html#stepwise-sel"><i class="fa fa-check"></i><b>6.3.1</b> Model selection with stepwise variable selection</a></li>
<li class="chapter" data-level="6.3.2" data-path="6-3-MREGVAR.html"><a href="6-3-MREGVAR.html#model-selection-with-cross-validationislcv"><i class="fa fa-check"></i><b>6.3.2</b> Model selection with cross-validation</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="6-4-MREGPR.html"><a href="6-4-MREGPR.html"><i class="fa fa-check"></i><b>6.4</b> Penalized regression</a><ul>
<li class="chapter" data-level="6.4.1" data-path="6-4-MREGPR.html"><a href="6-4-MREGPR.html#ridge-regression"><i class="fa fa-check"></i><b>6.4.1</b> Ridge Regression</a></li>
<li class="chapter" data-level="6.4.2" data-path="6-4-MREGPR.html"><a href="6-4-MREGPR.html#lasso"><i class="fa fa-check"></i><b>6.4.2</b> Lasso</a></li>
<li class="chapter" data-level="6.4.3" data-path="6-4-MREGPR.html"><a href="6-4-MREGPR.html#elastic-net"><i class="fa fa-check"></i><b>6.4.3</b> Elastic net</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="6-5-MREGRELPO.html"><a href="6-5-MREGRELPO.html"><i class="fa fa-check"></i><b>6.5</b> Relative importance metrics</a></li>
<li class="chapter" data-level="6.6" data-path="6-6-MREGORTHO.html"><a href="6-6-MREGORTHO.html"><i class="fa fa-check"></i><b>6.6</b> Orthogonalization</a></li>
<li class="chapter" data-level="6.7" data-path="6-7-MREGPREDICT.html"><a href="6-7-MREGPREDICT.html"><i class="fa fa-check"></i><b>6.7</b> Prediction accuracy</a></li>
<li class="chapter" data-level="6.8" data-path="6-8-discussion.html"><a href="6-8-discussion.html"><i class="fa fa-check"></i><b>6.8</b> Discussion</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="7-ar-models-with-covariates.html"><a href="7-ar-models-with-covariates.html"><i class="fa fa-check"></i><b>7</b> AR models with covariates</a><ul>
<li class="chapter" data-level="7.1" data-path="7-1-MREGARMA.html"><a href="7-1-MREGARMA.html"><i class="fa fa-check"></i><b>7.1</b> MREG with ARMA errors</a><ul>
<li class="chapter" data-level="7.1.1" data-path="7-1-MREGARMA.html"><a href="7-1-MREGARMA.html#example-fitting-with-auto.arima"><i class="fa fa-check"></i><b>7.1.1</b> Example: fitting with auto.arima</a></li>
<li class="chapter" data-level="7.1.2" data-path="7-1-MREGARMA.html"><a href="7-1-MREGARMA.html#example-fitting-with-arima-and-sarima"><i class="fa fa-check"></i><b>7.1.2</b> Example: fitting with arima and sarima</a></li>
<li class="chapter" data-level="7.1.3" data-path="7-1-MREGARMA.html"><a href="7-1-MREGARMA.html#example-fitting-with-gls"><i class="fa fa-check"></i><b>7.1.3</b> Example: fitting with gls</a></li>
<li class="chapter" data-level="7.1.4" data-path="7-1-MREGARMA.html"><a href="7-1-MREGARMA.html#mreg-of-first-or-second-differences"><i class="fa fa-check"></i><b>7.1.4</b> MREG of first or second differences</a></li>
<li class="chapter" data-level="7.1.5" data-path="6-8-discussion.html"><a href="6-8-discussion.html#discussion"><i class="fa fa-check"></i><b>7.1.5</b> Discussion</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="7-2-ARMAX.html"><a href="7-2-ARMAX.html"><i class="fa fa-check"></i><b>7.2</b> ARMAX Models</a><ul>
<li class="chapter" data-level="7.2.1" data-path="6-8-discussion.html"><a href="6-8-discussion.html#discussion"><i class="fa fa-check"></i><b>7.2.1</b> Discussion</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="8-seasonality.html"><a href="8-seasonality.html"><i class="fa fa-check"></i><b>8</b> Seasonality</a><ul>
<li class="chapter" data-level="8.1" data-path="8-1-chinook-data.html"><a href="8-1-chinook-data.html"><i class="fa fa-check"></i><b>8.1</b> Chinook data</a><ul>
<li class="chapter" data-level="" data-path="8-1-chinook-data.html"><a href="8-1-chinook-data.html#load-the-chinook-salmon-data-set"><i class="fa fa-check"></i>Load the chinook salmon data set</a></li>
<li class="chapter" data-level="" data-path="8-1-chinook-data.html"><a href="8-1-chinook-data.html#plot-seasonal-data"><i class="fa fa-check"></i>Plot seasonal data</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="8-2-seasonal-exponential-smoothing-model.html"><a href="8-2-seasonal-exponential-smoothing-model.html"><i class="fa fa-check"></i><b>8.2</b> Seasonal Exponential Smoothing Model</a><ul>
<li class="chapter" data-level="8.2.1" data-path="8-2-seasonal-exponential-smoothing-model.html"><a href="8-2-seasonal-exponential-smoothing-model.html#force-seasonality-to-evolve-more"><i class="fa fa-check"></i><b>8.2.1</b> Force seasonality to evolve more</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="8-3-seasonal-arima-model.html"><a href="8-3-seasonal-arima-model.html"><i class="fa fa-check"></i><b>8.3</b> Seasonal ARIMA model</a></li>
<li class="chapter" data-level="8.4" data-path="3-4-fitting-arima-models.html"><a href="3-4-fitting-arima-models.html#missing-values"><i class="fa fa-check"></i><b>8.4</b> Missing values</a></li>
<li class="chapter" data-level="8.5" data-path="8-5-forecast-evaluation.html"><a href="8-5-forecast-evaluation.html"><i class="fa fa-check"></i><b>8.5</b> Forecast evaluation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="1-5-references.html"><a href="1-5-references.html#references"><i class="fa fa-check"></i>References</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="A-inputting-data.html"><a href="A-inputting-data.html"><i class="fa fa-check"></i><b>A</b> Inputting data</a><ul>
<li class="chapter" data-level="" data-path="A-inputting-data.html"><a href="A-inputting-data.html#one-response-variable"><i class="fa fa-check"></i>one response variable</a></li>
<li class="chapter" data-level="" data-path="A-inputting-data.html"><a href="A-inputting-data.html#many-response-variables"><i class="fa fa-check"></i>Many response variables</a></li>
<li class="chapter" data-level="" data-path="A-inputting-data.html"><a href="A-inputting-data.html#many-response-variables-two-time-variables"><i class="fa fa-check"></i>Many response variables, two time variables</a></li>
<li class="chapter" data-level="" data-path="A-inputting-data.html"><a href="A-inputting-data.html#one-response-variable-multiple-explanatory-variables"><i class="fa fa-check"></i>One response variable, multiple explanatory variables</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="B-downloading-icoads-covariates.html"><a href="B-downloading-icoads-covariates.html"><i class="fa fa-check"></i><b>B</b> Downloading ICOADS covariates</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Fisheries Catch Forecasting</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="metrics" class="section level2">
<h2><span class="header-section-number">5.3</span> Metrics</h2>
<p>How to we quantify the difference between the forecast and the actual values in the test data set?</p>
<p>Letâ€™s take the example of a training set/test set.</p>
<p>The forecast errors are the difference between the test data and the forecasts.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="5-3-metrics.html#cb201-1"></a>fr.err &lt;-<span class="st"> </span>testdat <span class="op">-</span><span class="st"> </span>fr<span class="op">$</span>mean</span>
<span id="cb201-2"><a href="5-3-metrics.html#cb201-2"></a>fr.err</span></code></pre></div>
<pre><code>## Time Series:
## Start = 1988 
## End = 1989 
## Frequency = 1 
## [1] -0.1704302 -0.4944778</code></pre>
<div id="accuracy-function" class="section level3">
<h3><span class="header-section-number">5.3.1</span> <code>accuracy()</code> function</h3>
<p>The <code>accuracy()</code> function in forecast provides many different metrics such as mean error, root mean square error, mean absolute error, mean percentage error, mean absolute percentage error. It requires a forecast object and a test data set that is the same length.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="5-3-metrics.html#cb203-1"></a><span class="kw">accuracy</span>(fr, testdat)</span></code></pre></div>
<pre><code>##                       ME      RMSE       MAE        MPE     MAPE      MASE
## Training set -0.00473511 0.1770653 0.1438523 -0.1102259 1.588409 0.7698386
## Test set     -0.33245398 0.3698342 0.3324540 -3.4390277 3.439028 1.7791577
##                     ACF1 Theil&#39;s U
## Training set -0.04312022        NA
## Test set     -0.50000000   1.90214</code></pre>
<p>The metrics are:</p>
<div id="me-mean-err" class="section level4 unnumbered">
<h4>ME Mean err</h4>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="5-3-metrics.html#cb205-1"></a>me &lt;-<span class="st"> </span><span class="kw">mean</span>(fr.err)</span>
<span id="cb205-2"><a href="5-3-metrics.html#cb205-2"></a>me</span></code></pre></div>
<pre><code>## [1] -0.332454</code></pre>
</div>
<div id="rmse-root-mean-squared-error" class="section level4 unnumbered">
<h4>RMSE Root mean squared error</h4>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="5-3-metrics.html#cb207-1"></a>rmse &lt;-<span class="st"> </span><span class="kw">sqrt</span>(<span class="kw">mean</span>(fr.err<span class="op">^</span><span class="dv">2</span>))</span>
<span id="cb207-2"><a href="5-3-metrics.html#cb207-2"></a>rmse</span></code></pre></div>
<pre><code>## [1] 0.3698342</code></pre>
</div>
<div id="mae-mean-absolute-error" class="section level4 unnumbered">
<h4>MAE Mean absolute error</h4>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="5-3-metrics.html#cb209-1"></a>mae &lt;-<span class="st"> </span><span class="kw">mean</span>(<span class="kw">abs</span>(fr.err))</span>
<span id="cb209-2"><a href="5-3-metrics.html#cb209-2"></a>mae</span></code></pre></div>
<pre><code>## [1] 0.332454</code></pre>
</div>
<div id="mpe-mean-percentage-error" class="section level4 unnumbered">
<h4>MPE Mean percentage error</h4>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="5-3-metrics.html#cb211-1"></a>fr.pe &lt;-<span class="st"> </span><span class="dv">100</span><span class="op">*</span>fr.err<span class="op">/</span>testdat</span>
<span id="cb211-2"><a href="5-3-metrics.html#cb211-2"></a>mpe &lt;-<span class="st"> </span><span class="kw">mean</span>(fr.pe)</span>
<span id="cb211-3"><a href="5-3-metrics.html#cb211-3"></a>mpe</span></code></pre></div>
<pre><code>## [1] -3.439028</code></pre>
</div>
<div id="mape-mean-absolute-percentage-error" class="section level4 unnumbered">
<h4>MAPE Mean absolute percentage error</h4>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="5-3-metrics.html#cb213-1"></a>mape &lt;-<span class="st"> </span><span class="kw">mean</span>(<span class="kw">abs</span>(fr.pe))</span>
<span id="cb213-2"><a href="5-3-metrics.html#cb213-2"></a>mape</span></code></pre></div>
<pre><code>## [1] 3.439028</code></pre>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="5-3-metrics.html#cb215-1"></a><span class="kw">accuracy</span>(fr, testdat)[,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>##                       ME      RMSE       MAE        MPE     MAPE
## Training set -0.00473511 0.1770653 0.1438523 -0.1102259 1.588409
## Test set     -0.33245398 0.3698342 0.3324540 -3.4390277 3.439028</code></pre>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="5-3-metrics.html#cb217-1"></a><span class="kw">c</span>(me, rmse, mae, mpe, mape)</span></code></pre></div>
<pre><code>## [1] -0.3324540  0.3698342  0.3324540 -3.4390277  3.4390277</code></pre>
</div>
</div>
<div id="test-multiple-models" class="section level3">
<h3><span class="header-section-number">5.3.2</span> Test multiple models</h3>
<p>Now that you have some metrics for forecast accuracy, you can compute these for all the models in your candidate set.</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="5-3-metrics.html#cb219-1"></a><span class="co"># The model picked by auto.arima</span></span>
<span id="cb219-2"><a href="5-3-metrics.html#cb219-2"></a>fit1 &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">Arima</span>(traindat, <span class="dt">order=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb219-3"><a href="5-3-metrics.html#cb219-3"></a>fr1 &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">forecast</span>(fit1, <span class="dt">h=</span><span class="dv">2</span>)</span>
<span id="cb219-4"><a href="5-3-metrics.html#cb219-4"></a>test1 &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">accuracy</span>(fr1, testdat)[<span class="dv">2</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</span>
<span id="cb219-5"><a href="5-3-metrics.html#cb219-5"></a></span>
<span id="cb219-6"><a href="5-3-metrics.html#cb219-6"></a><span class="co"># AR-1</span></span>
<span id="cb219-7"><a href="5-3-metrics.html#cb219-7"></a>fit2 &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">Arima</span>(traindat, <span class="dt">order=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>))</span>
<span id="cb219-8"><a href="5-3-metrics.html#cb219-8"></a>fr2 &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">forecast</span>(fit2, <span class="dt">h=</span><span class="dv">2</span>)</span>
<span id="cb219-9"><a href="5-3-metrics.html#cb219-9"></a>test2 &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">accuracy</span>(fr2, testdat)[<span class="dv">2</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</span>
<span id="cb219-10"><a href="5-3-metrics.html#cb219-10"></a></span>
<span id="cb219-11"><a href="5-3-metrics.html#cb219-11"></a><span class="co"># Naive model with drift</span></span>
<span id="cb219-12"><a href="5-3-metrics.html#cb219-12"></a>fit3 &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">rwf</span>(traindat, <span class="dt">drift=</span><span class="ot">TRUE</span>)</span>
<span id="cb219-13"><a href="5-3-metrics.html#cb219-13"></a>fr3 &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">forecast</span>(fit3, <span class="dt">h=</span><span class="dv">2</span>)</span>
<span id="cb219-14"><a href="5-3-metrics.html#cb219-14"></a>test3 &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">accuracy</span>(fr3, testdat)[<span class="dv">2</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</span></code></pre></div>
<div id="show-a-summary" class="section level4 unnumbered">
<h4>Show a summary</h4>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
ME
</th>
<th style="text-align:left;">
RMSE
</th>
<th style="text-align:left;">
MAE
</th>
<th style="text-align:left;">
MPE
</th>
<th style="text-align:left;">
MAPE
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
(0,1,1)
</td>
<td style="text-align:left;">
-0.293
</td>
<td style="text-align:left;">
0.320
</td>
<td style="text-align:left;">
0.293
</td>
<td style="text-align:left;">
-3.024
</td>
<td style="text-align:left;">
3.024
</td>
</tr>
<tr>
<td style="text-align:left;">
(1,1,0)
</td>
<td style="text-align:left;">
-0.309
</td>
<td style="text-align:left;">
0.341
</td>
<td style="text-align:left;">
0.309
</td>
<td style="text-align:left;">
-3.200
</td>
<td style="text-align:left;">
3.200
</td>
</tr>
<tr>
<td style="text-align:left;">
Naive
</td>
<td style="text-align:left;">
-0.483
</td>
<td style="text-align:left;">
0.510
</td>
<td style="text-align:left;">
0.483
</td>
<td style="text-align:left;">
-4.985
</td>
<td style="text-align:left;">
4.985
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="cross-validation" class="section level3">
<h3><span class="header-section-number">5.3.3</span> Cross-validation</h3>
<p>Computing forecast errors and performance metrics with time series cross-validation is similar to the training set/test test approach.</p>
<p>The first step to using the <code>tsCV()</code> function is to define the function that returns a forecast for your model. Your function needs to take <code>x</code>, a time series, and <code>h</code> the length of the forecast. You can also have other arguments if needed. Here is an example function for a forecast from an ARIMA model.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="5-3-metrics.html#cb220-1"></a>fun &lt;-<span class="st"> </span><span class="cf">function</span>(x, h, order){</span>
<span id="cb220-2"><a href="5-3-metrics.html#cb220-2"></a>  forecast<span class="op">::</span><span class="kw">forecast</span>(<span class="kw">Arima</span>(x, <span class="dt">order=</span>order), <span class="dt">h=</span>h)</span>
<span id="cb220-3"><a href="5-3-metrics.html#cb220-3"></a>}</span></code></pre></div>
<p>We pass this into the <code>tsCV()</code> function. <code>tsCV()</code> requires our dataset and our forecast function. The arguments after the forecast function are those we included in our <code>fun</code> definition. <code>tsCV()</code> returns a time series of errors.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="5-3-metrics.html#cb221-1"></a>e &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">tsCV</span>(traindat, fun, <span class="dt">h=</span><span class="dv">1</span>, <span class="dt">order=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>))</span></code></pre></div>
<p>We then can compute performance metrics from these errors.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="5-3-metrics.html#cb222-1"></a>tscv1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">ME=</span><span class="kw">mean</span>(e, <span class="dt">na.rm=</span><span class="ot">TRUE</span>), <span class="dt">RMSE=</span><span class="kw">sqrt</span>(<span class="kw">mean</span>(e<span class="op">^</span><span class="dv">2</span>, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)), <span class="dt">MAE=</span><span class="kw">mean</span>(<span class="kw">abs</span>(e), <span class="dt">na.rm=</span><span class="ot">TRUE</span>))</span>
<span id="cb222-2"><a href="5-3-metrics.html#cb222-2"></a>tscv1</span></code></pre></div>
<pre><code>##        ME      RMSE       MAE 
## 0.1128788 0.2261706 0.1880392</code></pre>
<div id="cross-validation-farther-in-future" class="section level4 unnumbered">
<h4>Cross-validation farther in future</h4>
<p>Compare accuracy of forecasts 1 year out versus 4 years out. If <code>h</code> is greater than 1, then the errors are returned as a matrix with each <code>h</code> in a column. Column 4 is the forecast, 4 years out.</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="5-3-metrics.html#cb224-1"></a>e &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">tsCV</span>(traindat, fun, <span class="dt">h=</span><span class="dv">4</span>, <span class="dt">order=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>))[,<span class="dv">4</span>]</span>
<span id="cb224-2"><a href="5-3-metrics.html#cb224-2"></a><span class="co">#RMSE</span></span>
<span id="cb224-3"><a href="5-3-metrics.html#cb224-3"></a>tscv4 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">ME=</span><span class="kw">mean</span>(e, <span class="dt">na.rm=</span><span class="ot">TRUE</span>), <span class="dt">RMSE=</span><span class="kw">sqrt</span>(<span class="kw">mean</span>(e<span class="op">^</span><span class="dv">2</span>, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)), <span class="dt">MAE=</span><span class="kw">mean</span>(<span class="kw">abs</span>(e), <span class="dt">na.rm=</span><span class="ot">TRUE</span>))</span>
<span id="cb224-4"><a href="5-3-metrics.html#cb224-4"></a><span class="kw">rbind</span>(tscv1, tscv4)</span></code></pre></div>
<pre><code>##              ME      RMSE       MAE
## tscv1 0.1128788 0.2261706 0.1880392
## tscv4 0.2839064 0.3812815 0.3359689</code></pre>
<p>As we would expect, forecast errors are higher when we make forecasts farther into the future.</p>
</div>
<div id="cross-validation-with-a-fixed-window" class="section level4 unnumbered">
<h4>Cross-validation with a fixed window</h4>
<p>Compare accuracy of forecasts with a fixed 10-year window and 1-year out forecasts.</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="5-3-metrics.html#cb226-1"></a>e &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">tsCV</span>(traindat, fun, <span class="dt">h=</span><span class="dv">1</span>, <span class="dt">order=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>), <span class="dt">window=</span><span class="dv">10</span>)</span>
<span id="cb226-2"><a href="5-3-metrics.html#cb226-2"></a><span class="co">#RMSE</span></span>
<span id="cb226-3"><a href="5-3-metrics.html#cb226-3"></a>tscvf1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">ME=</span><span class="kw">mean</span>(e, <span class="dt">na.rm=</span><span class="ot">TRUE</span>), <span class="dt">RMSE=</span><span class="kw">sqrt</span>(<span class="kw">mean</span>(e<span class="op">^</span><span class="dv">2</span>, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)), <span class="dt">MAE=</span><span class="kw">mean</span>(<span class="kw">abs</span>(e), <span class="dt">na.rm=</span><span class="ot">TRUE</span>))</span>
<span id="cb226-4"><a href="5-3-metrics.html#cb226-4"></a>tscvf1</span></code></pre></div>
<pre><code>##        ME      RMSE       MAE 
## 0.1387670 0.2286572 0.1942840</code></pre>
</div>
<div id="all-the-forecasts-tests-together" class="section level4 unnumbered">
<h4>All the forecasts tests together</h4>
<p>Here are all 4 types of forecasts tests together. There is not right approach. Time series cross-validation has the advantage that you test many more forecasts and use all your data.</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="5-3-metrics.html#cb228-1"></a>comp.tab &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="dt">train.test=</span>test1[<span class="kw">c</span>(<span class="st">&quot;ME&quot;</span>,<span class="st">&quot;RMSE&quot;</span>,<span class="st">&quot;MAE&quot;</span>)],</span>
<span id="cb228-2"><a href="5-3-metrics.html#cb228-2"></a>      <span class="dt">tsCV.variable1=</span>tscv1,</span>
<span id="cb228-3"><a href="5-3-metrics.html#cb228-3"></a>      <span class="dt">tsCV.variable4=</span>tscv4,</span>
<span id="cb228-4"><a href="5-3-metrics.html#cb228-4"></a>      <span class="dt">tsCV.fixed1=</span>tscvf1)</span>
<span id="cb228-5"><a href="5-3-metrics.html#cb228-5"></a>knitr<span class="op">::</span><span class="kw">kable</span>(comp.tab, <span class="dt">format=</span><span class="st">&quot;html&quot;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
ME
</th>
<th style="text-align:right;">
RMSE
</th>
<th style="text-align:right;">
MAE
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
train.test
</td>
<td style="text-align:right;">
-0.2925326
</td>
<td style="text-align:right;">
0.3201093
</td>
<td style="text-align:right;">
0.2925326
</td>
</tr>
<tr>
<td style="text-align:left;">
tsCV.variable1
</td>
<td style="text-align:right;">
0.1128788
</td>
<td style="text-align:right;">
0.2261706
</td>
<td style="text-align:right;">
0.1880392
</td>
</tr>
<tr>
<td style="text-align:left;">
tsCV.variable4
</td>
<td style="text-align:right;">
0.2839064
</td>
<td style="text-align:right;">
0.3812815
</td>
<td style="text-align:right;">
0.3359689
</td>
</tr>
<tr>
<td style="text-align:left;">
tsCV.fixed1
</td>
<td style="text-align:right;">
0.1387670
</td>
<td style="text-align:right;">
0.2286572
</td>
<td style="text-align:right;">
0.1942840
</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="5-2-cross-validation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="5-4-candidate-model-set.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/fish-forecast/Fish-Forecast-Bookdown/edit/master/Forecasting-5-2-Metrics.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
