<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Forecasting Catch Time Series</title>
  <meta name="description" content="Forecasting from catch time series using R.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Forecasting Catch Time Series" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Forecasting from catch time series using R." />
  <meta name="github-repo" content="fish-forecast/Fish-Forecast-Bookdown/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Forecasting Catch Time Series" />
  
  <meta name="twitter:description" content="Forecasting from catch time series using R." />
  

<meta name="author" content="Elizabeth Holmes">


<meta name="date" content="2018-10-11">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="5-testing-forecast-accuracy.html">
<link rel="next" href="5-2-testing-multiple-models.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html"><img src="./images/fish-forecast.jpg" width=50></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="1-introduction.html"><a href="1-introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="1-1-stergiou-and-christou-1996.html"><a href="1-1-stergiou-and-christou-1996.html"><i class="fa fa-check"></i><b>1.1</b> Stergiou and Christou 1996</a><ul>
<li class="chapter" data-level="1.1.1" data-path="1-1-stergiou-and-christou-1996.html"><a href="1-1-stergiou-and-christou-1996.html#hellenic-landings-data"><i class="fa fa-check"></i><b>1.1.1</b> Hellenic landings data</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="1-2-the-landings-data-landings-rdata.html"><a href="1-2-the-landings-data-landings-rdata.html"><i class="fa fa-check"></i><b>1.2</b> The landings data, landings.RData</a></li>
<li class="chapter" data-level="1.3" data-path="1-3-ts-objects.html"><a href="1-3-ts-objects.html"><i class="fa fa-check"></i><b>1.3</b> ts objects</a><ul>
<li class="chapter" data-level="1.3.1" data-path="1-3-ts-objects.html"><a href="1-3-ts-objects.html#ts-function"><i class="fa fa-check"></i><b>1.3.1</b> <code>ts()</code> function</a></li>
<li class="chapter" data-level="1.3.2" data-path="1-3-ts-objects.html"><a href="1-3-ts-objects.html#ggplot-and-ts-objects"><i class="fa fa-check"></i><b>1.3.2</b> ggplot and ts objects</a></li>
<li class="chapter" data-level="1.3.3" data-path="1-3-ts-objects.html"><a href="1-3-ts-objects.html#plotting-using-a-data-frame"><i class="fa fa-check"></i><b>1.3.3</b> Plotting using a data frame</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="1-4-packages.html"><a href="1-4-packages.html"><i class="fa fa-check"></i><b>1.4</b> Packages</a></li>
<li class="chapter" data-level="1.5" data-path="1-5-references.html"><a href="1-5-references.html"><i class="fa fa-check"></i><b>1.5</b> References</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-time-varying-regression.html"><a href="2-time-varying-regression.html"><i class="fa fa-check"></i><b>2</b> Time-varying regression</a><ul>
<li class="chapter" data-level="2.1" data-path="2-1-fitting-time-varying-regressions.html"><a href="2-1-fitting-time-varying-regressions.html"><i class="fa fa-check"></i><b>2.1</b> Fitting time-varying regressions</a><ul>
<li class="chapter" data-level="2.1.1" data-path="2-1-fitting-time-varying-regressions.html"><a href="2-1-fitting-time-varying-regressions.html#orthogonal-polynomials"><i class="fa fa-check"></i><b>2.1.1</b> Orthogonal polynomials</a></li>
<li class="chapter" data-level="2.1.2" data-path="2-1-fitting-time-varying-regressions.html"><a href="2-1-fitting-time-varying-regressions.html#residual-diagnostics"><i class="fa fa-check"></i><b>2.1.2</b> Residual diagnostics</a></li>
<li class="chapter" data-level="2.1.3" data-path="2-1-fitting-time-varying-regressions.html"><a href="2-1-fitting-time-varying-regressions.html#compare-to-stergiou-and-christou"><i class="fa fa-check"></i><b>2.1.3</b> Compare to Stergiou and Christou</a></li>
<li class="chapter" data-level="2.1.4" data-path="2-1-fitting-time-varying-regressions.html"><a href="2-1-fitting-time-varying-regressions.html#summary"><i class="fa fa-check"></i><b>2.1.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="2-2-forecasting-with-a-time-varying-regression-model.html"><a href="2-2-forecasting-with-a-time-varying-regression-model.html"><i class="fa fa-check"></i><b>2.2</b> Forecasting with a time-varying regression model</a><ul>
<li class="chapter" data-level="2.2.1" data-path="2-2-forecasting-with-a-time-varying-regression-model.html"><a href="2-2-forecasting-with-a-time-varying-regression-model.html#the-forecast-package"><i class="fa fa-check"></i><b>2.2.1</b> The forecast package</a></li>
<li class="chapter" data-level="2.2.2" data-path="2-2-forecasting-with-a-time-varying-regression-model.html"><a href="2-2-forecasting-with-a-time-varying-regression-model.html#summary-1"><i class="fa fa-check"></i><b>2.2.2</b> Summary</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-arima-models.html"><a href="3-arima-models.html"><i class="fa fa-check"></i><b>3</b> ARIMA Models</a><ul>
<li class="chapter" data-level="3.1" data-path="3-1-overview.html"><a href="3-1-overview.html"><i class="fa fa-check"></i><b>3.1</b> Overview</a><ul>
<li class="chapter" data-level="3.1.1" data-path="3-1-overview.html"><a href="3-1-overview.html#components-of-an-arima-model"><i class="fa fa-check"></i><b>3.1.1</b> Components of an ARIMA model</a></li>
<li class="chapter" data-level="3.1.2" data-path="3-1-overview.html"><a href="3-1-overview.html#box-jenkins-method"><i class="fa fa-check"></i><b>3.1.2</b> Box-Jenkins Method</a></li>
<li class="chapter" data-level="3.1.3" data-path="3-1-overview.html"><a href="3-1-overview.html#acf-and-pacf-functions"><i class="fa fa-check"></i><b>3.1.3</b> ACF and PACF functions</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="3-2-stationarity.html"><a href="3-2-stationarity.html"><i class="fa fa-check"></i><b>3.2</b> Stationarity</a><ul>
<li class="chapter" data-level="3.2.1" data-path="3-2-stationarity.html"><a href="3-2-stationarity.html#definition"><i class="fa fa-check"></i><b>3.2.1</b> Definition</a></li>
<li class="chapter" data-level="3.2.2" data-path="3-2-stationarity.html"><a href="3-2-stationarity.html#non-stationarity"><i class="fa fa-check"></i><b>3.2.2</b> Non-stationarity</a></li>
<li class="chapter" data-level="3.2.3" data-path="3-2-stationarity.html"><a href="3-2-stationarity.html#stationarity-tests"><i class="fa fa-check"></i><b>3.2.3</b> Stationarity tests</a></li>
<li class="chapter" data-level="3.2.4" data-path="3-2-stationarity.html"><a href="3-2-stationarity.html#differencing-the-data"><i class="fa fa-check"></i><b>3.2.4</b> Differencing the data</a></li>
<li class="chapter" data-level="3.2.5" data-path="3-2-stationarity.html"><a href="3-2-stationarity.html#summary-2"><i class="fa fa-check"></i><b>3.2.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="3-3-model-structure.html"><a href="3-3-model-structure.html"><i class="fa fa-check"></i><b>3.3</b> Model Structure</a><ul>
<li class="chapter" data-level="3.3.1" data-path="3-3-model-structure.html"><a href="3-3-model-structure.html#ar-and-ma-lags"><i class="fa fa-check"></i><b>3.3.1</b> AR and MA lags</a></li>
<li class="chapter" data-level="3.3.2" data-path="3-3-model-structure.html"><a href="3-3-model-structure.html#model-order"><i class="fa fa-check"></i><b>3.3.2</b> Model order</a></li>
<li class="chapter" data-level="3.3.3" data-path="3-3-model-structure.html"><a href="3-3-model-structure.html#choosing-the-ar-and-ma-levels"><i class="fa fa-check"></i><b>3.3.3</b> Choosing the AR and MA levels</a></li>
<li class="chapter" data-level="3.3.4" data-path="3-3-model-structure.html"><a href="3-3-model-structure.html#trace-true"><i class="fa fa-check"></i><b>3.3.4</b> Trace = TRUE</a></li>
<li class="chapter" data-level="3.3.5" data-path="3-3-model-structure.html"><a href="3-3-model-structure.html#stepwisefalse"><i class="fa fa-check"></i><b>3.3.5</b> stepwise=FALSE</a></li>
<li class="chapter" data-level="3.3.6" data-path="3-3-model-structure.html"><a href="3-3-model-structure.html#summary-3"><i class="fa fa-check"></i><b>3.3.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="3-4-fitting-arima-models.html"><a href="3-4-fitting-arima-models.html"><i class="fa fa-check"></i><b>3.4</b> Fitting ARIMA Models</a><ul>
<li class="chapter" data-level="3.4.1" data-path="3-4-fitting-arima-models.html"><a href="3-4-fitting-arima-models.html#fitting-with-auto.arima"><i class="fa fa-check"></i><b>3.4.1</b> Fitting with <code>auto.arima()</code></a></li>
<li class="chapter" data-level="3.4.2" data-path="3-4-fitting-arima-models.html"><a href="3-4-fitting-arima-models.html#outputting-the-models-tested"><i class="fa fa-check"></i><b>3.4.2</b> Outputting the models tested</a></li>
<li class="chapter" data-level="3.4.3" data-path="3-4-fitting-arima-models.html"><a href="3-4-fitting-arima-models.html#repeat-with-the-sardine-data"><i class="fa fa-check"></i><b>3.4.3</b> Repeat with the sardine data</a></li>
<li class="chapter" data-level="3.4.4" data-path="3-4-fitting-arima-models.html"><a href="3-4-fitting-arima-models.html#missing-values"><i class="fa fa-check"></i><b>3.4.4</b> Missing values</a></li>
<li class="chapter" data-level="3.4.5" data-path="3-4-fitting-arima-models.html"><a href="3-4-fitting-arima-models.html#fit-a-specific-arima-model"><i class="fa fa-check"></i><b>3.4.5</b> Fit a specific ARIMA model</a></li>
<li class="chapter" data-level="3.4.6" data-path="3-4-fitting-arima-models.html"><a href="3-4-fitting-arima-models.html#model-checking"><i class="fa fa-check"></i><b>3.4.6</b> Model Checking</a></li>
<li class="chapter" data-level="3.4.7" data-path="3-4-fitting-arima-models.html"><a href="3-4-fitting-arima-models.html#workflow-for-non-seasonal-data"><i class="fa fa-check"></i><b>3.4.7</b> Workflow for non-seasonal data</a></li>
<li class="chapter" data-level="3.4.8" data-path="3-4-fitting-arima-models.html"><a href="3-4-fitting-arima-models.html#stepwise-vs-exhaustive-model-selection"><i class="fa fa-check"></i><b>3.4.8</b> Stepwise vs exhaustive model selection</a></li>
<li class="chapter" data-level="3.4.9" data-path="3-4-fitting-arima-models.html"><a href="3-4-fitting-arima-models.html#summary-4"><i class="fa fa-check"></i><b>3.4.9</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="3-5-forecasting.html"><a href="3-5-forecasting.html"><i class="fa fa-check"></i><b>3.5</b> Forecasting</a><ul>
<li class="chapter" data-level="3.5.1" data-path="3-5-forecasting.html"><a href="3-5-forecasting.html#forecasting-with-forecast"><i class="fa fa-check"></i><b>3.5.1</b> Forecasting with <code>forecast()</code></a></li>
<li class="chapter" data-level="3.5.2" data-path="3-5-forecasting.html"><a href="3-5-forecasting.html#missing-values-1"><i class="fa fa-check"></i><b>3.5.2</b> Missing values</a></li>
<li class="chapter" data-level="3.5.3" data-path="3-5-forecasting.html"><a href="3-5-forecasting.html#null-forecast-models"><i class="fa fa-check"></i><b>3.5.3</b> Null forecast models</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-exponential-smoothing-models.html"><a href="4-exponential-smoothing-models.html"><i class="fa fa-check"></i><b>4</b> Exponential Smoothing Models</a><ul>
<li class="chapter" data-level="4.1" data-path="4-1-naive-forecast.html"><a href="4-1-naive-forecast.html"><i class="fa fa-check"></i><b>4.1</b> Naive forecast</a></li>
<li class="chapter" data-level="4.2" data-path="4-2-simple-ets.html"><a href="4-2-simple-ets.html"><i class="fa fa-check"></i><b>4.2</b> Simple ETS</a></li>
<li class="chapter" data-level="4.3" data-path="4-3-fitting-with-ets.html"><a href="4-3-fitting-with-ets.html"><i class="fa fa-check"></i><b>4.3</b> Fitting with <code>ets()</code></a><ul>
<li class="chapter" data-level="4.3.1" data-path="4-3-fitting-with-ets.html"><a href="4-3-fitting-with-ets.html#exponential-smoothing-with-no-trend"><i class="fa fa-check"></i><b>4.3.1</b> Exponential smoothing with no trend</a></li>
<li class="chapter" data-level="4.3.2" data-path="4-3-fitting-with-ets.html"><a href="4-3-fitting-with-ets.html#the-weighting-function"><i class="fa fa-check"></i><b>4.3.2</b> The weighting function</a></li>
<li class="chapter" data-level="4.3.3" data-path="4-3-fitting-with-ets.html"><a href="4-3-fitting-with-ets.html#produce-forecast-using-a-previous-fit"><i class="fa fa-check"></i><b>4.3.3</b> Produce forecast using a previous fit</a></li>
<li class="chapter" data-level="4.3.4" data-path="4-3-fitting-with-ets.html"><a href="4-3-fitting-with-ets.html#naive-model-with-drift"><i class="fa fa-check"></i><b>4.3.4</b> Naive model with drift</a></li>
<li class="chapter" data-level="4.3.5" data-path="4-3-fitting-with-ets.html"><a href="4-3-fitting-with-ets.html#exponential-smoothing-model-with-trend"><i class="fa fa-check"></i><b>4.3.5</b> Exponential smoothing model with trend</a></li>
<li class="chapter" data-level="4.3.6" data-path="4-3-fitting-with-ets.html"><a href="4-3-fitting-with-ets.html#naive-model-with-trend"><i class="fa fa-check"></i><b>4.3.6</b> Naive model with trend</a></li>
<li class="chapter" data-level="4.3.7" data-path="4-3-fitting-with-ets.html"><a href="4-3-fitting-with-ets.html#exponential-smoothing-model-with-trend-1"><i class="fa fa-check"></i><b>4.3.7</b> Exponential smoothing model with trend</a></li>
<li class="chapter" data-level="4.3.8" data-path="4-3-fitting-with-ets.html"><a href="4-3-fitting-with-ets.html#decomposing-your-model-fit"><i class="fa fa-check"></i><b>4.3.8</b> Decomposing your model fit</a></li>
<li class="chapter" data-level="4.3.9" data-path="4-3-fitting-with-ets.html"><a href="4-3-fitting-with-ets.html#forecast-performance"><i class="fa fa-check"></i><b>4.3.9</b> Forecast performance</a></li>
<li class="chapter" data-level="4.3.10" data-path="4-3-fitting-with-ets.html"><a href="4-3-fitting-with-ets.html#test-forecast-performance"><i class="fa fa-check"></i><b>4.3.10</b> Test forecast performance</a></li>
<li class="chapter" data-level="4.3.11" data-path="4-3-fitting-with-ets.html"><a href="4-3-fitting-with-ets.html#testing-a-specific-ets-model"><i class="fa fa-check"></i><b>4.3.11</b> Testing a specific ets model</a></li>
<li class="chapter" data-level="4.3.12" data-path="4-3-fitting-with-ets.html"><a href="4-3-fitting-with-ets.html#forecast-accuracy-metrics"><i class="fa fa-check"></i><b>4.3.12</b> Forecast accuracy metrics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-testing-forecast-accuracy.html"><a href="5-testing-forecast-accuracy.html"><i class="fa fa-check"></i><b>5</b> Testing forecast accuracy</a><ul>
<li class="chapter" data-level="5.1" data-path="5-1-measures-of-forecast-accuracy.html"><a href="5-1-measures-of-forecast-accuracy.html"><i class="fa fa-check"></i><b>5.1</b> Measures of forecast accuracy</a><ul>
<li class="chapter" data-level="5.1.1" data-path="5-1-measures-of-forecast-accuracy.html"><a href="5-1-measures-of-forecast-accuracy.html#metrics"><i class="fa fa-check"></i><b>5.1.1</b> Metrics</a></li>
<li class="chapter" data-level="5.1.2" data-path="5-1-measures-of-forecast-accuracy.html"><a href="5-1-measures-of-forecast-accuracy.html#test-multiple-models"><i class="fa fa-check"></i><b>5.1.2</b> Test multiple models</a></li>
<li class="chapter" data-level="5.1.3" data-path="5-1-measures-of-forecast-accuracy.html"><a href="5-1-measures-of-forecast-accuracy.html#cross-validation"><i class="fa fa-check"></i><b>5.1.3</b> Cross-Validation</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="5-2-testing-multiple-models.html"><a href="5-2-testing-multiple-models.html"><i class="fa fa-check"></i><b>5.2</b> Testing multiple models</a><ul>
<li class="chapter" data-level="5.2.1" data-path="5-2-testing-multiple-models.html"><a href="5-2-testing-multiple-models.html#example-candidate-model-set-for-anchovy"><i class="fa fa-check"></i><b>5.2.1</b> Example candidate model set for anchovy</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="6-covariates.html"><a href="6-covariates.html"><i class="fa fa-check"></i><b>6</b> Covariates</a><ul>
<li class="chapter" data-level="6.1" data-path="6-1-multivariate-linear-regression-with-arma-errors.html"><a href="6-1-multivariate-linear-regression-with-arma-errors.html"><i class="fa fa-check"></i><b>6.1</b> Multivariate linear regression with ARMA errors</a><ul>
<li class="chapter" data-level="6.1.1" data-path="6-1-multivariate-linear-regression-with-arma-errors.html"><a href="6-1-multivariate-linear-regression-with-arma-errors.html#example-anchovy"><i class="fa fa-check"></i><b>6.1.1</b> Example: anchovy</a></li>
<li class="chapter" data-level="6.1.2" data-path="6-1-multivariate-linear-regression-with-arma-errors.html"><a href="6-1-multivariate-linear-regression-with-arma-errors.html#mreg-of-first-or-second-differences"><i class="fa fa-check"></i><b>6.1.2</b> MREG of first or second differences</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="7-seasonality.html"><a href="7-seasonality.html"><i class="fa fa-check"></i><b>7</b> Seasonality</a><ul>
<li class="chapter" data-level="7.0.1" data-path="7-seasonality.html"><a href="7-seasonality.html#load-the-chinook-salmon-data-set"><i class="fa fa-check"></i><b>7.0.1</b> Load the chinook salmon data set</a></li>
<li class="chapter" data-level="7.0.2" data-path="7-seasonality.html"><a href="7-seasonality.html#plot-seasonal-data"><i class="fa fa-check"></i><b>7.0.2</b> Plot seasonal data</a></li>
<li class="chapter" data-level="7.1" data-path="7-1-seasonal-exponential-smoothing-model.html"><a href="7-1-seasonal-exponential-smoothing-model.html"><i class="fa fa-check"></i><b>7.1</b> Seasonal Exponential Smoothing Model</a><ul>
<li class="chapter" data-level="7.1.1" data-path="7-1-seasonal-exponential-smoothing-model.html"><a href="7-1-seasonal-exponential-smoothing-model.html#force-seasonality-to-evolve-more"><i class="fa fa-check"></i><b>7.1.1</b> Force seasonality to evolve more</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="7-2-seasonal-arima-model.html"><a href="7-2-seasonal-arima-model.html"><i class="fa fa-check"></i><b>7.2</b> Seasonal ARIMA model</a></li>
<li class="chapter" data-level="7.3" data-path="7-3-missing-values-2.html"><a href="7-3-missing-values-2.html"><i class="fa fa-check"></i><b>7.3</b> Missing values</a></li>
<li class="chapter" data-level="7.4" data-path="7-4-forecast-evaluation.html"><a href="7-4-forecast-evaluation.html"><i class="fa fa-check"></i><b>7.4</b> Forecast evaluation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references-1.html"><a href="references-1.html"><i class="fa fa-check"></i>References</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="A-inputting-data.html"><a href="A-inputting-data.html"><i class="fa fa-check"></i><b>A</b> Inputting data</a><ul>
<li class="chapter" data-level="" data-path="A-inputting-data.html"><a href="A-inputting-data.html#one-response-variable"><i class="fa fa-check"></i>one response variable</a></li>
<li class="chapter" data-level="" data-path="A-inputting-data.html"><a href="A-inputting-data.html#many-response-variables"><i class="fa fa-check"></i>Many response variables</a></li>
<li class="chapter" data-level="" data-path="A-inputting-data.html"><a href="A-inputting-data.html#many-response-variables-two-time-variables"><i class="fa fa-check"></i>Many response variables, two time variables</a></li>
<li class="chapter" data-level="" data-path="A-inputting-data.html"><a href="A-inputting-data.html#one-response-variable-multiple-explanatory-variables"><i class="fa fa-check"></i>One response variable, multiple explanatory variables</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="B-downloading-icoads-covariates.html"><a href="B-downloading-icoads-covariates.html"><i class="fa fa-check"></i><b>B</b> Downloading ICOADS covariates</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Forecasting Catch Time Series</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="measures-of-forecast-accuracy" class="section level2">
<h2><span class="header-section-number">5.1</span> Measures of forecast accuracy</h2>
<p>To measure the forecast fit, we fit a model to training data and test a forecast against data in a test set. We ‘held out’ the test data and did not use it at all in our fitting.</p>
<p>Stergiou and Christou used 1964-1987 as their training data and tested their forecasts against 1988 and 1989. This is a training set/test set approach to forecast performance evaluation.</p>
<div id="forecast-versus-actual" class="section level4">
<h4><span class="header-section-number">5.1.0.1</span> Forecast versus actual</h4>
<p>We will fit to the training data and make a forecast for the test data. We can then compare the forecast to the actual values in the test data.</p>
<pre class="sourceCode r"><code class="sourceCode r">fit1 &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">auto.arima</span>(traindat)
fr &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">forecast</span>(fit1, <span class="dt">h=</span><span class="dv">2</span>)
fr</code></pre>
<pre><code>##    Point Forecast    Lo 80    Hi 80    Lo 95    Hi 95
## 25       10.03216 9.789577 10.27475 9.661160 10.40317
## 26       10.09625 9.832489 10.36001 9.692861 10.49964</code></pre>
<p>Plot the forecast and compare to the actual values in 1988 and 1989.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(fr)
<span class="kw">points</span>(<span class="dv">25</span><span class="op">:</span><span class="dv">26</span>, testdat, <span class="dt">pch=</span><span class="dv">2</span>, <span class="dt">col=</span><span class="st">&quot;red&quot;</span>)
<span class="kw">legend</span>(<span class="st">&quot;topleft&quot;</span>, <span class="kw">c</span>(<span class="st">&quot;forecast&quot;</span>,<span class="st">&quot;actual&quot;</span>), <span class="dt">pch=</span><span class="kw">c</span>(<span class="dv">20</span>,<span class="dv">2</span>), <span class="dt">col=</span><span class="kw">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;red&quot;</span>))</code></pre>
<p><img src="Fish-Forecast_files/figure-html/unnamed-chunk-54-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="metrics" class="section level3">
<h3><span class="header-section-number">5.1.1</span> Metrics</h3>
<p>How to we quantify the difference between the forecast and the actual values in the test data set?</p>
<pre class="sourceCode r"><code class="sourceCode r">fr.err &lt;-<span class="st"> </span>testdat <span class="op">-</span><span class="st"> </span>fr<span class="op">$</span>mean
fr.err</code></pre>
<pre><code>## Time Series:
## Start = 25 
## End = 26 
## Frequency = 1 
## [1] -0.1704302 -0.4944778</code></pre>
<p>The <code>accuracy()</code> function in forecast provides many different metrics such as mean error, root mean square error, mean absolute error, mean percentage error, mean absolute percentage error.</p>
<div id="me-mean-err" class="section level4 unnumbered">
<h4>ME Mean err</h4>
<pre class="sourceCode r"><code class="sourceCode r">me &lt;-<span class="st"> </span><span class="kw">mean</span>(fr.err)
me</code></pre>
<pre><code>## [1] -0.332454</code></pre>
</div>
<div id="rmse-root-mean-squared-error" class="section level4 unnumbered">
<h4>RMSE Root mean squared error</h4>
<pre class="sourceCode r"><code class="sourceCode r">rmse &lt;-<span class="st"> </span><span class="kw">sqrt</span>(<span class="kw">mean</span>(fr.err<span class="op">^</span><span class="dv">2</span>))
rmse</code></pre>
<pre><code>## [1] 0.3698342</code></pre>
</div>
<div id="mae-mean-absolute-error" class="section level4 unnumbered">
<h4>MAE Mean absolute error</h4>
<pre class="sourceCode r"><code class="sourceCode r">mae &lt;-<span class="st"> </span><span class="kw">mean</span>(<span class="kw">abs</span>(fr.err))
mae</code></pre>
<pre><code>## [1] 0.332454</code></pre>
</div>
<div id="mpe-mean-percentage-error" class="section level4 unnumbered">
<h4>MPE Mean percentage error</h4>
<pre class="sourceCode r"><code class="sourceCode r">fr.pe &lt;-<span class="st"> </span><span class="dv">100</span><span class="op">*</span>fr.err<span class="op">/</span>testdat
mpe &lt;-<span class="st"> </span><span class="kw">mean</span>(fr.pe)
mpe</code></pre>
<pre><code>## [1] -3.439028</code></pre>
</div>
<div id="mape-mean-absolute-percentage-error" class="section level4 unnumbered">
<h4>MAPE Mean absolute percentage error</h4>
<pre class="sourceCode r"><code class="sourceCode r">mape &lt;-<span class="st"> </span><span class="kw">mean</span>(<span class="kw">abs</span>(fr.pe))
mape</code></pre>
<pre><code>## [1] 3.439028</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">accuracy</span>(fr, testdat)[,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</code></pre>
<pre><code>##                       ME      RMSE       MAE        MPE     MAPE
## Training set -0.00473511 0.1770653 0.1438523 -0.1102259 1.588409
## Test set     -0.33245398 0.3698342 0.3324540 -3.4390277 3.439028</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(me, rmse, mae, mpe, mape)</code></pre>
<pre><code>## [1] -0.3324540  0.3698342  0.3324540 -3.4390277  3.4390277</code></pre>
<hr />
</div>
</div>
<div id="test-multiple-models" class="section level3">
<h3><span class="header-section-number">5.1.2</span> Test multiple models</h3>
<p>Now that you have some metrics for forecast accuracy, you can compute these for all the models in your candidate set.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># The model picked by auto.arima</span>
fit1 &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">Arima</span>(traindat, <span class="dt">order=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>))
fr1 &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">forecast</span>(fit1, <span class="dt">h=</span><span class="dv">2</span>)
test1 &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">accuracy</span>(fr1, testdat)[<span class="dv">2</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]

<span class="co"># AR-1</span>
fit2 &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">Arima</span>(traindat, <span class="dt">order=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>))
fr2 &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">forecast</span>(fit2, <span class="dt">h=</span><span class="dv">2</span>)
test2 &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">accuracy</span>(fr2, testdat)[<span class="dv">2</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]

<span class="co"># Naive model with drift</span>
fit3 &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">rwf</span>(traindat, <span class="dt">drift=</span><span class="ot">TRUE</span>)
fr3 &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">forecast</span>(fit3, <span class="dt">h=</span><span class="dv">2</span>)
test3 &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">accuracy</span>(fr3, testdat)[<span class="dv">2</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</code></pre>
<div id="show-a-summary" class="section level4 unnumbered">
<h4>Show a summary</h4>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
ME
</th>
<th style="text-align:left;">
RMSE
</th>
<th style="text-align:left;">
MAE
</th>
<th style="text-align:left;">
MPE
</th>
<th style="text-align:left;">
MAPE
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
(0,1,1)
</td>
<td style="text-align:left;">
-0.293
</td>
<td style="text-align:left;">
0.320
</td>
<td style="text-align:left;">
0.293
</td>
<td style="text-align:left;">
-3.024
</td>
<td style="text-align:left;">
3.024
</td>
</tr>
<tr>
<td style="text-align:left;">
(1,1,0)
</td>
<td style="text-align:left;">
-0.309
</td>
<td style="text-align:left;">
0.341
</td>
<td style="text-align:left;">
0.309
</td>
<td style="text-align:left;">
-3.200
</td>
<td style="text-align:left;">
3.200
</td>
</tr>
<tr>
<td style="text-align:left;">
Naive
</td>
<td style="text-align:left;">
-0.483
</td>
<td style="text-align:left;">
0.510
</td>
<td style="text-align:left;">
0.483
</td>
<td style="text-align:left;">
-4.985
</td>
<td style="text-align:left;">
4.985
</td>
</tr>
</tbody>
</table>
<hr />
</div>
</div>
<div id="cross-validation" class="section level3">
<h3><span class="header-section-number">5.1.3</span> Cross-Validation</h3>
<p>An alternate approach to testing a model’s forecast accuracy is to use cross-validation. This approach uses windows or shorter segments of the whole time series to make a series of single forecasts. We can use either a sliding or a fixed window. For example for the Anchovy time series, we could fit the model 1964-1973 and forecast 1974, then 1964-1974 and forecast 1975, then 1964-1975 and forecast 1976, and continue up to 1964-1988 and forecast 1989. This would create 16 forecasts to test. The window is ‘sliding’ because the length of the time series used for fitting the model, keeps increasing by 1.</p>
<p><img src="Fish-Forecast_files/figure-html/cv.sliding-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Another approach uses a fixed window. For example, a 10-year window.</p>
<p><img src="Fish-Forecast_files/figure-html/cv.fixed-1.png" width="672" style="display: block; margin: auto;" /></p>
<div id="time-series-cross-validation-with-tscv" class="section level4">
<h4><span class="header-section-number">5.1.3.1</span> Time-series cross-validation with <code>tsCV()</code></h4>
<pre class="sourceCode r"><code class="sourceCode r">far2 &lt;-<span class="st"> </span><span class="cf">function</span>(x, h, order){
  forecast<span class="op">::</span><span class="kw">forecast</span>(<span class="kw">Arima</span>(x, <span class="dt">order=</span>order), <span class="dt">h=</span>h)
  }
e &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">tsCV</span>(traindat, far2, <span class="dt">h=</span><span class="dv">1</span>, <span class="dt">order=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>))
tscv1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">ME=</span><span class="kw">mean</span>(e, <span class="dt">na.rm=</span><span class="ot">TRUE</span>), <span class="dt">RMSE=</span><span class="kw">sqrt</span>(<span class="kw">mean</span>(e<span class="op">^</span><span class="dv">2</span>, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)), <span class="dt">MAE=</span><span class="kw">mean</span>(<span class="kw">abs</span>(e), <span class="dt">na.rm=</span><span class="ot">TRUE</span>))
tscv1</code></pre>
<pre><code>##        ME      RMSE       MAE 
## 0.1128788 0.2261706 0.1880392</code></pre>
<p>Compare to RMSE from just the 2 test data points.</p>
<pre class="sourceCode r"><code class="sourceCode r">test1[<span class="kw">c</span>(<span class="st">&quot;ME&quot;</span>,<span class="st">&quot;RMSE&quot;</span>,<span class="st">&quot;MAE&quot;</span>)]</code></pre>
<pre><code>##         ME       RMSE        MAE 
## -0.2925326  0.3201093  0.2925326</code></pre>
</div>
<div id="cross-validation-farther-in-future" class="section level4 unnumbered">
<h4>Cross-validation farther in future</h4>
<p><img src="Fish-Forecast_files/figure-html/cv.sliding.4plot-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Compare accuracy of forecasts 1 year out versus 4 years out. If <code>h</code> is greater than 1, then the errors are returned as a matrix with each <code>h</code> in a column. Column 4 is the forecast, 4 years out.</p>
<pre class="sourceCode r"><code class="sourceCode r">e &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">tsCV</span>(traindat, far2, <span class="dt">h=</span><span class="dv">4</span>, <span class="dt">order=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>))[,<span class="dv">4</span>]
<span class="co">#RMSE</span>
tscv4 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">ME=</span><span class="kw">mean</span>(e, <span class="dt">na.rm=</span><span class="ot">TRUE</span>), <span class="dt">RMSE=</span><span class="kw">sqrt</span>(<span class="kw">mean</span>(e<span class="op">^</span><span class="dv">2</span>, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)), <span class="dt">MAE=</span><span class="kw">mean</span>(<span class="kw">abs</span>(e), <span class="dt">na.rm=</span><span class="ot">TRUE</span>))
<span class="kw">rbind</span>(tscv1, tscv4)</code></pre>
<pre><code>##              ME      RMSE       MAE
## tscv1 0.1128788 0.2261706 0.1880392
## tscv4 0.2839064 0.3812815 0.3359689</code></pre>
</div>
<div id="cross-validation-with-a-fixed-window" class="section level4 unnumbered">
<h4>Cross-validation with a fixed window</h4>
<p>Compare accuracy of forecasts with a fixed 10-year window and 1-year out forecasts.</p>
<pre class="sourceCode r"><code class="sourceCode r">e &lt;-<span class="st"> </span>forecast<span class="op">::</span><span class="kw">tsCV</span>(traindat, far2, <span class="dt">h=</span><span class="dv">1</span>, <span class="dt">order=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>), <span class="dt">window=</span><span class="dv">10</span>)
<span class="co">#RMSE</span>
tscvf1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">ME=</span><span class="kw">mean</span>(e, <span class="dt">na.rm=</span><span class="ot">TRUE</span>), <span class="dt">RMSE=</span><span class="kw">sqrt</span>(<span class="kw">mean</span>(e<span class="op">^</span><span class="dv">2</span>, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)), <span class="dt">MAE=</span><span class="kw">mean</span>(<span class="kw">abs</span>(e), <span class="dt">na.rm=</span><span class="ot">TRUE</span>))
tscvf1</code></pre>
<pre><code>##        ME      RMSE       MAE 
## 0.1387670 0.2286572 0.1942840</code></pre>
</div>
<div id="all-the-forecasts-tests-together" class="section level4 unnumbered">
<h4>All the forecasts tests together</h4>
<pre class="sourceCode r"><code class="sourceCode r">comp.tab &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="dt">test1=</span>test1[<span class="kw">c</span>(<span class="st">&quot;ME&quot;</span>,<span class="st">&quot;RMSE&quot;</span>,<span class="st">&quot;MAE&quot;</span>)],
      <span class="dt">slide1=</span>tscv1,
      <span class="dt">slide4=</span>tscv4,
      <span class="dt">fixed1=</span>tscvf1)
knitr<span class="op">::</span><span class="kw">kable</span>(comp.tab, <span class="dt">format=</span><span class="st">&quot;html&quot;</span>)</code></pre>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
ME
</th>
<th style="text-align:right;">
RMSE
</th>
<th style="text-align:right;">
MAE
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
test1
</td>
<td style="text-align:right;">
-0.2925326
</td>
<td style="text-align:right;">
0.3201093
</td>
<td style="text-align:right;">
0.2925326
</td>
</tr>
<tr>
<td style="text-align:left;">
slide1
</td>
<td style="text-align:right;">
0.1128788
</td>
<td style="text-align:right;">
0.2261706
</td>
<td style="text-align:right;">
0.1880392
</td>
</tr>
<tr>
<td style="text-align:left;">
slide4
</td>
<td style="text-align:right;">
0.2839064
</td>
<td style="text-align:right;">
0.3812815
</td>
<td style="text-align:right;">
0.3359689
</td>
</tr>
<tr>
<td style="text-align:left;">
fixed1
</td>
<td style="text-align:right;">
0.1387670
</td>
<td style="text-align:right;">
0.2286572
</td>
<td style="text-align:right;">
0.1942840
</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="5-testing-forecast-accuracy.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="5-2-testing-multiple-models.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
